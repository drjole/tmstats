<h1>All games</h1>

<% if @games.none? %>
  There are not games yet.
  <% if policy(Game).create? %>
    <%= link_to "Create a new one.", new_game_path %>
  <% end %>
<% end %>

<% (@games.minimum(:date)..@games.maximum(:date)).map(&:beginning_of_month).uniq.reverse.each do |date| %>
  <% games = @games.where(date: date.all_month) %>
  <% if games.any? %>
    <h2><%= l(date, format: "%B %Y") %></h2>
    <%= render games %>
  <% end %>
<% end %>
