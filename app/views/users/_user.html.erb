<% if user.profile_picture.attached? %>
  <div class="flex justify-center">
    <%= image_tag user.profile_picture.variant(:profile), class: "rounded-lg" %>
  </div>
<% end %>

<p>
  Played
  <% games_count = user.games.count %>
  <%= games_count %>
  <%= "game".pluralize(games_count) %>.
</p>

<p>
  Won
  <% wins = user.games.select { |game| game.players.first.user == user }.count %>
  <%= wins %>
  <%= "time".pluralize(wins) %>
  ðŸ”¥.
</p>

<p>
  <%
    boards =
      Board
        .joins(games: :players)
        .where(players: { user_id: user.id })
        .group("boards.id")
        .select("boards.*, COUNT(games.id) as games_count")
    games_count = boards.max_by(&:games_count).games_count
  %>
  Played the most games on
  <%= boards.select { |board| board.games_count == games_count }.map(&:name).join(", ") %>
  (<%= games_count %>
  <%= "game".pluralize(games_count) %>).
</p>
